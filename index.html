<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications Awtrix3</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Notifications Awtrix3</h1>
            <div class="connection-status" id="connectionStatus">
                <span class="status-indicator" id="statusIndicator"></span>
                <span id="statusText">Non connect√©</span>
            </div>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn tab-btn--active" data-tab="notification">Notification</button>
            <button class="tab-btn" data-tab="history">Historique</button>
            <button class="tab-btn" data-tab="settings">R√©glages</button>
        </nav>

        <main class="app-main">
            <!-- Section Nouvelle Notification -->
            <div class="tab-content tab-content--active" id="notification">
                <div class="card">
                    <div class="card__header">
                        <h2>Nouvelle Notification</h2>
                    </div>
                    <div class="card__body">
                        <form id="notificationForm">
                            <div class="form-group">
                                <label class="form-label" for="message">Message</label>
                                <textarea 
                                    class="form-control" 
                                    id="message" 
                                    rows="3" 
                                    maxlength="500" 
                                    placeholder="Entrez votre message..."
                                    required
                                ></textarea>
                                <div class="char-counter">
                                    <span id="charCount">0</span>/500 caract√®res
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Couleur du texte</label>
                                <div class="color-palette" id="colorPalette">
                                    <!-- G√©n√©r√© dynamiquement -->
                                </div>
                                <input type="hidden" id="selectedColor" value="FFFFFF">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="sound">Son</label>
                                <select class="form-control" id="sound">
                                    <!-- G√©n√©r√© dynamiquement -->
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="icon">Ic√¥ne (ID)</label>
                                <input 
                                    type="number" 
                                    class="form-control" 
                                    id="icon" 
                                    min="0" 
                                    max="9999" 
                                    placeholder="Ex: 1234"
                                >
                                <small class="form-help">ID d'ic√¥ne entre 0 et 9999</small>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="effect">Effet</label>
                                <select class="form-control" id="effect">
                                    <!-- G√©n√©r√© dynamiquement -->
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="repeat">R√©p√©titions</label>
                                <div class="slider-container">
                                    <input 
                                        type="range" 
                                        class="form-slider" 
                                        id="repeat" 
                                        min="1" 
                                        max="10" 
                                        value="1"
                                    >
                                    <span class="slider-value" id="repeatValue">1</span>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn--secondary btn--full-width" id="previewBtn">
                                    Aper√ßu
                                </button>
                                <button type="submit" class="btn btn--primary btn--full-width" id="sendBtn">
                                    <span class="btn-text">Envoyer Notification</span>
                                    <span class="btn-loading hidden">Envoi en cours...</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Aper√ßu -->
                <div class="card preview-card hidden" id="previewCard">
                    <div class="card__header">
                        <h3>Aper√ßu</h3>
                    </div>
                    <div class="card__body">
                        <div class="preview-display" id="previewDisplay">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section Historique -->
            <div class="tab-content" id="history">
                <div class="card">
                    <div class="card__header">
                        <h2>Historique des Notifications</h2>
                        <button class="btn btn--sm btn--secondary" id="clearHistoryBtn">
                            Vider l'historique
                        </button>
                    </div>
                    <div class="card__body">
                        <div id="historyList" class="history-list">
                            <div class="empty-state">
                                <p>Aucune notification dans l'historique</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section R√©glages -->
            <div class="tab-content" id="settings">
                <div class="card">
                    <div class="card__header">
                        <h2>Configuration</h2>
                    </div>
                    <div class="card__body">
                        <div class="form-group">
                            <label class="form-label" for="clockIp">IP de l'horloge Awtrix3</label>
                            <input 
                                type="text" 
                                class="form-control" 
                                id="clockIp" 
                                placeholder="192.168.0.84"
                                pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$"
                            >
                            <small class="form-help">Format: 192.168.0.84</small>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn--outline btn--full-width" id="testConnectionBtn">
                                Tester la connexion
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3>Aide √† la connexion</h3>
                    </div>
                    <div class="card__body">
                        <div class="help-section">
                            <h4>En cas de probl√®me de connexion :</h4>
                            <ul>
                                <li>V√©rifiez que vous √™tes sur le m√™me r√©seau WiFi que l'horloge</li>
                                <li>Si vous n'√™tes pas sur le r√©seau local, activez le VPN WireGuard</li>
                                <li>Assurez-vous que l'horloge est allum√©e et accessible</li>
                                <li>L'IP par d√©faut est g√©n√©ralement 192.168.0.84</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Messages Toast -->
        <div class="toast-container" id="toastContainer"></div>
    </div>
    <!-- Dans la section r√©glages par exemple -->
    <div class="form-group">
        <button type="button" id="installBtn" class="btn btn--secondary" style="display: none;">
            üì± Installer l'application
        </button>
    </div>
    <script src="app.js"></script>
</body>
</html>